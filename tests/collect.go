package main

import (
	"crypto/ecdsa"
	"encoding/json"
	"errors"
	"fmt"
)

func NewCollect(name string, userAddr string, token string, workKey *ecdsa.PrivateKey) error {
	url := SrcUrl + "newCollections"
	datam := make(map[string]string)
	datam["categories"] = "Utility"
	datam["contract_addr"] = ""
	datam["contract_type"] = "NFT1155"
	datam["desc"] = "demo for test"
	datam["img"] = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAEAAQADAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+/igAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgBiSJIu+N0kXLLuRg67kYqw3KSMqwKsM5DAg4IIo7eaTXmmk013TTTT2aaa0Dv5Np+TW6fmuqH0AFACZAIBIBPQZ5OOTj1wKP03D9dhaACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP50/8Agn3+0D8T4PBPhX9mrwP45+GHwWs9N0L9vH9o2bx38TfC914yuPHkej/8FBf2iPCOu+H/AAlo3/Cb+ALGy0X4ZWyaP4i+JmvtqWs3Vhb+OPBkDWWiW11/aGo3Xrr/AFXy/MauMwmGjwn4KfR9xH1KukqlbDZ14TYGtWz7F1pV6csPkuV1shpZZWnGiqdTG5nT9pj8POlSw+JwoUbcRZjhKeHxFepxR4t+M+DVek244evkfF2VrC5ZQpKlN18zzanxDjMZRpymnHC5NWdChiubEzwXpuv/APBRn4/eIvgD8bfjlpXiX4HfAGb9n/8AYE+F/wC1pq/hP4meC9a8X/8ACf8AiX4peCfiL4k017O7b4meAb3w58OjrXw/j8LeGpIrPWNb8Qavr6wS3VteWdvpuo8PE1atkmXcS5hh6MqtbL8/ybIMvyuteNehjM1ynIsfQwePq8sXPM8wzHiP/V/LqKpYeksz4azVJY5V5Usv7uH6dLOM14fy2tXpUKGYPO8RiMzUorD4zK8m4lx2T1s7wSnUVOlk+GynLKfEmY4r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Mbshr6xX9mqPt63skpJUvaT9mlOaqSShzcqUpxjOStZzipO7SZCwOCVZ4lYPCrEOVOTxCw9JVnKlTlRpSdXk53KnRnOlTbleFOUoRajJp85ofg220nVJ9Xlksp7qXTn0xEsdHstItjBPcR3N7c3UFqXF3qGoSW9mLq4Zo4NlpElvaQBpfM7MTmM6+GWFjGpGk68a8lVxFTENOnTnSo0qLqa0qFGNWs4QbnUk6r9pVnyQ5fJy/IaeCx8sxqVaNXELC1cHCVDA4bA80MRXo18ViMV9XVsTjMTPC4V1KqjRpR9k/Y4el7Sd+nsdN07S4Wt9MsLLToHkMrQWNrBaQtKyqrSNHbxxoZCqIpcqWKooJwoA4qtetXkpV61WtKMeWMqtSdSSjdy5U5uTUbyk7J2u27XbPXw2DwmChKng8LhsJTnLnnDDUKVCEp8qjzyjSjBSlyxjHmab5YpXskXayOkKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD/9k="
	datam["name"] = name
	datam["user_addr"] = userAddr

	datas, _ := json.Marshal(&datam)
	data, err := HttpSendSign(datas, workKey)
	if err != nil {
		fmt.Println("NewCollect() sign err=", err)
		return err
	}
	b, err := HttpSendRev(url, data, token)
	if err != nil {
		fmt.Println("NewCollect() err=", err)
		return err
	}
	b = DelDataItem(b)
	var revData ResponseLogin
	err = json.Unmarshal([]byte(b), &revData)
	if err != nil {
		fmt.Println("get resp failed, err", err)
		return err
	}
	if revData.Code != "200" {
		return errors.New(revData.Msg)
	}
	return nil
}
